/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.4/samples
 */

plugins {
    `java-gradle-plugin`
    `maven-publish`
    id("com.diffplug.spotless") version "6.23.3"
    checkstyle
    id("com.gradle.plugin-publish") version "1.2.1"
}

gradlePlugin {
    plugins {
        create("gradleBuildToolsPlugin") {
            id = "top.claws.gradle-build-tools"
            displayName = "Gradle Build Tools"
            description = "Collection of commonly-used build tools for Gradle Java project."
            tags.set(listOf("build tools"))
            implementationClass = "top.claws.GradleBuildToolsPlugin"
        }
    }
    website.set("https://github.com/jingjiecb/gradle-build-tools")
    vcsUrl.set("https://github.com/jingjiecb/gradle-build-tools")
}

checkstyle {
    isIgnoreFailures = false
    configFile = file("${project.rootDir}/src/main/resources/checkstyle.xml")
    configProperties["checkstyle.suppression.filter"] = file("${project.rootDir}/src/main/resources/suppressions.xml")
}

spotless {
    format("misc") {
        target("*.gradle", ".gitattributes", ".gitignore")
        trimTrailingWhitespace()
        indentWithTabs()
        endWithNewline()
    }
    java {
        googleJavaFormat("1.17.0").aosp().reflowLongStrings().skipJavadocFormatting();
        formatAnnotations()
        licenseHeader("/* (C)\$YEAR */")
    }
}

group = "top.claws"
version = "1.0"

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    implementation("com.diffplug.spotless:spotless-plugin-gradle:6.23.3")
    implementation("io.freefair.gradle:lombok-plugin:8.4")
}
